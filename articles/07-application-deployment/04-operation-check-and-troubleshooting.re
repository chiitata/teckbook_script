== 動作確認とトラブルシューティング

全てのデプロイ作業と設定が完了しました。最後に、公開されたアプリケーションが意図した通りに動作するかを、ユーザーの視点で一通り確認しましょう。また、問題が発生した場合の基本的な調査方法についても解説します。

=== 動作確認リスト

本番URL（`https://...vercel.app`）にアクセスし、以下の項目をチェックしてみてください。

 * **[ ] トップページの表示**: 検索フォームが正しく表示されるか。
 * **[ ] 新規ユーザー登録**: 新しいメールアドレスとパスワードでサインアップできるか。Supabaseから確認メールが届くか。
 * **[ ] ログイン・ログアウト**: 登録したユーザーでログインできるか。ログイン後、ヘッダーの表示が「マイページ」「ログアウト」に切り替わるか。ログアウトできるか。
 * **[ ] 動画検索**: キーワードを入力して動画を検索できるか。検索結果が正しく表示されるか。
 * **[ ] お気に入り機能**: ログイン状態で、動画をお気に入り登録・解除できるか。（※この機能はUIを完全に実装していないため、エラーが出ないことを確認）
 * **[ ] マイページ**: マイページにアクセスできるか。お気に入りに登録した動画が表示されるか。
 * **[ ] 認証制御**: ログアウト状態でマイページ（`/mypage`）にアクセスしようとした際に、ログインページ（`/login`）にリダイレクトされるか。

これらの機能が全て正常に動作していれば、アプリケーションは無事に完成です！

=== トラブルシューティング

もし期待通りに動作しない場合は、Vercelのログを確認するのが問題解決の第一歩です。

**Vercelのログ確認方法:**

 1. Vercelのプロジェクトダッシュボードにアクセスします。
 2. 上部のタブから「Logs」を選択します。

ここには、ビルド時のログや、アプリケーションがリクエストを受け取った際のサーバーサイドのログ（`console.log`など）が表示されます。Server ComponentsやServer Actions内で発生したエラーは、主にここで確認できます。

#image[vercel-logs][Vercelのログ画面]{
#}

**よくある問題とチェックポイント:**

 * **500 Internal Server Errorが表示される**: 
   * Vercelのログを確認し、エラーメッセージを読み解きましょう。
   * Server ComponentsやServer Actions内で、環境変数が正しく読み込めていない可能性があります。Vercelの環境変数設定を再確認してください。

 * **Supabaseの操作でエラーが出る**: 
   * VercelのログにSupabaseからのエラーメッセージが出力されていないか確認します。
   * RLSポリシーが正しく設定されているか、Supabaseのダッシュボードで再確認してください。

 * **認証がうまくいかない**: 
   * SupabaseのAuth設定（URL Configurationなど）が本番URLになっているか確認してください。

 * **クライアントサイドのエラー**: 
   * ブラウザの開発者ツール（F12キーなどで開く）の「Console」タブにエラーメッセージが表示されていないか確認します。

エラーの原因を特定し、コードを修正してGitHubにプッシュすれば、Vercelが自動で再デプロイを行ってくれます。粘り強く問題解決に取り組むことも、エンジニアにとって重要なスキルの一つです。

これで第7章は完了です。お疲れ様でした。次の最終章では、このアプリケーションをさらに良くするためのステップアップ案をいくつか紹介します。
